{% extends "labeling/base.html" %}

{% block content %}



{% if form.errors %}
<p>Something went wrong, make sure your old password is correct. The new password must be longer than 8 characters and cannot contain your user credentials.</p>
{% endif %}


<form action="{% url 'password_change' %}" method="post">
  {% csrf_token %}

  <!--
    <table>
    {{ form.as_table }}
    <tr>
    <td></td>
    <td><input type="submit" value="Submit"></td>
    </tr>
    </table>
  -->

  <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
    <input class="mdl-textfield__input" type="password" name="old_password" autocomplete="current-password" autofocus="" id="id_old_password">
    <label class="mdl-textfield__label" for="id_old_password">Old password</label>
  </div>


  <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
    <input class="mdl-textfield__input" type="password" name="new_password1" autocomplete="new-password" id="id_new_password1">
    <label class="mdl-textfield__label" for="id_new_password1">New password</label>
  </div>


  <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
    <input class="mdl-textfield__input" type="password" name="new_password2" autocomplete="new-password" id="id_new_password2">
    <label class="mdl-textfield__label" for="id_new_password2">New password repeat</label>
  </div>


  <input type="submit" value="Update" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored login-button">


  <input type="hidden" name="next" value="{{ next }}">
</form>

<script>
  $(document).ready(function() {
    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function showDialogOnOpen() {
      console.log('Taking a break...');
      await sleep(80);
      console.log('show model');
      dialog.showModal()
    }

    showDialogOnOpen();
  });
</script>

{% endblock %}
